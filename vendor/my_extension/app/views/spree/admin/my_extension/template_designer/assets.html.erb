<%= stylesheet_link_tag 'spree/backend/my_extension/template_designer', media: 'all' %>
<%= tag.meta name: "csrf-token", content: csrf_meta_tags %>
<%= tag.meta name: "turbo-cache-control", content: "no-cache" %>
<div class="pt-3">
  <h1>Template Designer Assets</h1>

  <%= link_to 'âž• New Asset', admin_new_template_designer_asset_path, data: { turbo: false } , class: 'btn btn-primary mb-3' %>

  <div class="fonts" style="display: flex; flex-wrap: wrap; gap: 10px;">
    <% @assets.each do |asset| %>

      <div class="templates-list text-center border p-2">
       
          <img class="cursor" src="<%= asset.data['thumbnail']||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAIAAAGtiBSGAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3FpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo5ZjNhOTg5Ni0xM2Y4LTlhNDMtYTU2MC1iYzMwYTUyZjAxODIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NDlCMzNGQkFGMDk0MTFFM0I0Nzk5Q0U5REM0MDk4MTUiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NDlCMzNGQjlGMDk0MTFFM0I0Nzk5Q0U5REM0MDk4MTUiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjhiOTBiNmY4LWIxZTQtMWM0Mi1hYzMzLTE3ZTMwMGFlZjRiMyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5ZjNhOTg5Ni0xM2Y4LTlhNDMtYTU2MC1iYzMwYTUyZjAxODIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6k4uTRAAAA9klEQVR42mI8ffo0Aw7AxIAbDAc5gABi/P///0j1O0AAMQD9Dox6Ukm8RpLpklFttNcGEEAMZMQ1KHeQl0pGbRu1bdQ2+tkGEECMkErcxMQESJ45c4ambGitSWtrIGwW+lgz6rNRn436bNRnoz4b9RlN2QAB2K9jGgAAEAaC/l2jgKXDT1cHcE0I6aVef4Up6RrTydI2MmPGjBkzZsyYMWPGjBmzNydAe3ZoAwAMAgEw3X/pijdMQFM4JIrwnOLUF3amSGWWf/utW3xwizNSqv25iTHGGGOMMcYYY4wxxhhjjDHGGGOMMcYYY4wxxhhjjDHG2CJjF9mijqqXrpprAAAAAElFTkSuQmCC" %>" alt="Preview" width="250" height="250" />
       
        <p class="text-center"><%= asset.name %></p>
        <div class="d-flex justify-content-around gap-2 mt-2">
          <%= link_to 'Edit', admin_new_template_designer_asset_path(id: asset.id), data: { turbo: false } , class: 'btn btn-warning btn-sm' %>
        <%= button_to 'Delete',
              admin_destroy_template_designer_asset_path(asset.id),
              method: :delete,
              data: { confirm: 'Are you sure?' },
              class: 'btn btn-danger btn-sm' %>
        </div>
      </div>
    <% end %>
  </div>
</div>


<script>
  const assets = <%= raw(@assets.to_json) %>;
  console.log("Assets:", assets);
</script>